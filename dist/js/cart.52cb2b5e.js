(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{1507:function(t,a,c){},da83:function(t,a,c){"use strict";c.r(a);var s=function(){var t=this,a=t.$createElement,c=t._self._c||a;return t.cart.carts&&0!==t.cart.carts.length?c("section",{staticClass:"cart container"},[t.cart.carts?c("h2",{staticClass:"cart-title"},[t._v("\n    共"+t._s(t.cart.carts.length)+"項商品\n  ")]):t._e(),t._l(t.cart.carts,function(a){return c("div",{key:a.id,staticClass:"cart-item"},[c("div",{staticClass:"cart-item-flex"},[c("img",{staticClass:"cart-item-flex-pic",attrs:{src:a.product.imageUrl,alt:""}}),c("div",{staticClass:"cart-item-flex-title"},[c("h4",{staticClass:"primary"},[t._v(t._s(a.product.title))]),c("p",{staticClass:"secondary"},[t._v("品牌:"+t._s(a.product.category))]),c("p",{staticClass:"qty"},[t._v("數量:"+t._s(a.qty)+t._s(a.product.unit))])]),c("button",{staticClass:"cart-item-flex-cancel",attrs:{type:"button"},on:{click:function(c){return t.removeCartItem(a.id)}}},[c("i",{staticClass:"fas fa-times "})])]),c("article",{staticClass:"cart-item-flex"},[a.final_total===a.total?c("h4",{staticClass:"cart-item-flex-price"},[t._v("\n        NT"+t._s(t._f("currency")(a.final_total))+"\n      ")]):c("article",{staticClass:"cart-item-flex-price"},[c("p",{staticClass:"discount"},[t._v("折扣後")]),c("p",{staticClass:"final"},[t._v("NT"+t._s(t._f("currency")(a.final_total)))]),c("p",{staticClass:"save"},[t._v("\n          省NT"+t._s(t._f("currency")(a.total-a.final_total))+"\n        ")])])])])}),c("article",{staticClass:"cart-block"},[c("div",{staticClass:"cart-block-sum"},[c("p",{staticClass:"cart-block-sum-name"},[t._v("商品金額小計")]),c("p",{staticClass:"cart-block-sum-price"},[t._v("NT"+t._s(t._f("currency")(t.cart.total)))])]),c("div",{staticClass:"cart-block-sum line"},[c("p",{staticClass:"cart-block-sum-name"},[t._v("活動折扣")]),c("p",{staticClass:"cart-block-sum-price"},[t._v("\n        -NT"+t._s(t._f("currency")(t.cart.total-t.cart.final_total))+"\n      ")])]),c("div",{staticClass:"cart-block-sum"},[t.cart.carts?c("p",{staticClass:"cart-block-sum-name"},[t._v("\n        共"+t._s(t.cart.carts.length)+"項商品\n      ")]):t._e(),c("p",{staticClass:"cart-block-sum-price final"},[t._v("\n        NT"+t._s(t._f("currency")(t.cart.final_total))+"\n      ")])]),c("div",{staticClass:"cart-block-coupon"},[c("label",{staticClass:"cart-block-coupon-title",attrs:{for:"num"}},[t._v("優惠券")]),c("div",{staticClass:"cart-block-coupon-flex"},[c("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"num",attrs:{type:"text",id:"num",placeholder:"請輸入123456"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),c("button",{staticClass:"use",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("使用")])])]),t.couponSwitch?c("div",{staticClass:"cart-block-sum"},[c("p",{staticClass:"cart-block-sum-coupon"},[t._v("(已套用優惠券)")])]):t._e(),c("router-link",{staticClass:"cart-block-next",attrs:{to:"/check-out"}},[t._v("下一步")])],1)],2):c("section",{staticClass:"empty container"},[c("h2",{staticClass:"empty-word"},[t._v("你的購物車還未有商品")]),c("router-link",{staticClass:"empty-home",attrs:{to:"/"}},[t._v("繼續購物")])],1)},o=[],e={data:function(){return{cart:{},coupon_code:"",couponSwitch:!1}},methods:{getCart:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$http.get("".concat("https://vue-course-api.hexschool.io","/api/adam/cart")).then(function(a){console.log(a.data),t.cart=a.data.data,t.$store.dispatch("updateLoading",!1)})},removeCartItem:function(t){var a=this;this.$store.dispatch("updateLoading",!0),this.$http.delete("".concat("https://vue-course-api.hexschool.io","/api/adam/cart/").concat(t)).then(function(t){console.log(t),a.getCart(),a.$bus.$emit("show"),a.$store.dispatch("updateLoading",!1)})},addCouponCode:function(){var t=this;this.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/adam/coupon"),c={code:this.coupon_code};this.$http.post(a,{data:c}).then(function(a){console.log(a),a.data.success?(t.getCart(),t.couponSwitch=!0):alert("優惠碼有誤"),t.$store.dispatch("updateLoading",!1)})},addtoCart:function(t){var a=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("updateLoading",!0);var s="".concat("https://vue-course-api.hexschool.io","/api/adam/cart"),o={product_id:t,qty:c};this.$http.post(s,{data:o}).then(function(t){console.log(t),t.data.success&&a.$bus.$emit("show")}),this.$store.dispatch("updateLoading",!1)},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/adam/order");this.$validator.validate().then(function(c){c?t.$http.post(a,{data:t.form}).then(function(a){a.data.success&&(console.log("訂單已建立",a),t.$router.push("/customer-checkout/".concat(a.data.orderId)))}):console.log("欄位不完整")})}},mounted:function(){this.getCart()}},i=e,r=(c("f156"),c("2877")),n=Object(r["a"])(i,s,o,!1,null,"74a980a5",null);a["default"]=n.exports},f156:function(t,a,c){"use strict";var s=c("1507"),o=c.n(s);o.a}}]);
//# sourceMappingURL=cart.52cb2b5e.js.map