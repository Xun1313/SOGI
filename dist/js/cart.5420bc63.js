(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"4ee1f":function(t,a,c){},da83:function(t,a,c){"use strict";c.r(a);var s=function(){var t=this,a=t.$createElement,c=t._self._c||a;return c("div",{staticClass:"all"},[t.cart.carts&&0!==t.cart.carts.length?c("div",{staticClass:"cart container"},[t.cart.carts?c("div",{staticClass:"cart-title"},[t._v("共"+t._s(t.cart.carts.length)+"項商品")]):t._e(),t._l(t.cart.carts,function(a){return c("div",{key:a.id,staticClass:"cart-item"},[c("div",{staticClass:"cart-item-flex"},[c("img",{staticClass:"cart-item-flex-pic",attrs:{src:a.product.imageUrl,alt:""}}),c("div",{staticClass:"cart-item-flex-title"},[c("div",{staticClass:"primary"},[t._v(t._s(a.product.title))]),c("div",{staticClass:"secondary"},[t._v("品牌:"+t._s(a.product.category))]),c("div",{staticClass:"qty"},[t._v("數量:"+t._s(a.qty)+t._s(a.product.unit))])]),c("div",{staticClass:"cart-item-flex-cancel",on:{click:function(c){return t.removeCartItem(a.id)}}},[c("i",{staticClass:"fas fa-times "})])]),c("div",{staticClass:"cart-item-flex"},[a.final_total===a.total?c("div",{staticClass:"cart-item-flex-price"},[t._v("NT"+t._s(t._f("currency")(a.final_total)))]):c("div",{staticClass:"cart-item-flex-price"},[c("div",{staticClass:"discount"},[t._v("折扣後")]),c("div",{staticClass:"final"},[t._v("NT"+t._s(t._f("currency")(a.final_total)))]),c("div",{staticClass:"save"},[t._v("省NT"+t._s(t._f("currency")(a.total-a.final_total)))])])])])}),c("div",{staticClass:"cart-block"},[c("div",{staticClass:"cart-block-sum"},[c("div",{staticClass:"cart-block-sum-name"},[t._v("商品金額小計")]),c("div",{staticClass:"cart-block-sum-price"},[t._v("NT"+t._s(t._f("currency")(t.cart.total)))])]),c("div",{staticClass:"cart-block-sum line"},[c("div",{staticClass:"cart-block-sum-name"},[t._v("活動折扣")]),c("div",{staticClass:"cart-block-sum-price"},[t._v("-NT"+t._s(t._f("currency")(t.cart.total-t.cart.final_total)))])]),c("div",{staticClass:"cart-block-sum"},[t.cart.carts?c("div",{staticClass:"cart-block-sum-name"},[t._v("共"+t._s(t.cart.carts.length)+"項商品")]):t._e(),c("div",{staticClass:"cart-block-sum-price final"},[t._v("NT"+t._s(t._f("currency")(t.cart.final_total)))])]),c("div",{staticClass:"cart-block-coupon"},[c("div",{staticClass:"cart-block-coupon-title"},[t._v("優惠券")]),c("div",{staticClass:"cart-block-coupon-flex"},[c("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"num",attrs:{type:"text",placeholder:"請輸入123456"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),c("div",{staticClass:"use",on:{click:t.addCouponCode}},[t._v("使用")])])]),t.couponSwitch?c("div",{staticClass:"cart-block-sum"},[c("div",{staticClass:"cart-block-sum-coupon"},[t._v("(已套用優惠券)")])]):t._e(),c("router-link",{staticClass:"cart-block-next",attrs:{to:"/check-out"}},[t._v("下一步")])],1)],2):c("div",{staticClass:"empty container"},[c("div",{staticClass:"empty-word"},[t._v("你的購物車還未有商品")]),c("router-link",{staticClass:"empty-home",attrs:{to:"/"}},[t._v("繼續購物")])],1)])},i=[],o=(c("ac6a"),{data:function(){return{cart:{},coupon_code:"",couponSwitch:!1}},methods:{getCart:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$http.get("".concat("https://vue-course-api.hexschool.io","/api/adam/cart")).then(function(a){console.log(a.data),t.cart=a.data.data,t.$store.dispatch("updateLoading",!1)})},removeCartItem:function(t){var a=this;this.$store.dispatch("updateLoading",!0),this.$http.delete("".concat("https://vue-course-api.hexschool.io","/api/adam/cart/").concat(t)).then(function(t){console.log(t),a.getCart(),a.$bus.$emit("show"),a.$store.dispatch("updateLoading",!1)})},addCouponCode:function(){var t=this;this.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/adam/coupon"),c={code:this.coupon_code};this.$http.post(a,{data:c}).then(function(a){console.log(a),a.data.success?(t.getCart(),t.couponSwitch=!0):alert("優惠碼有誤"),t.$store.dispatch("updateLoading",!1)})},addtoCart:function(t){var a=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("updateLoading",!0);var s="".concat("https://vue-course-api.hexschool.io","/api/adam/cart"),i={product_id:t,qty:c};this.$http.post(s,{data:i}).then(function(t){console.log(t),t.data.success&&a.$bus.$emit("show")}),this.$store.dispatch("updateLoading",!1)},changeCart:function(t,a,c){var s=this;console.log(t),this.cart.carts.forEach(function(i){i.id===t&&(a?i.qty++:i.qty--,s.addtoCart(t,c))})},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/adam/order");this.$validator.validate().then(function(c){c?t.$http.post(a,{data:t.form}).then(function(a){a.data.success&&(console.log("訂單已建立",a),t.$router.push("/customer-checkout/".concat(a.data.orderId)))}):console.log("欄位不完整")})}},mounted:function(){this.getCart()}}),e=o,r=(c("f4a5"),c("2877")),n=Object(r["a"])(e,s,i,!1,null,"4fb5d948",null);a["default"]=n.exports},f4a5:function(t,a,c){"use strict";var s=c("4ee1f"),i=c.n(s);i.a}}]);
//# sourceMappingURL=cart.5420bc63.js.map