(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"31ab":function(t,a,s){"use strict";var o=s("ad72"),c=s.n(o);c.a},ad72:function(t,a,s){},da83:function(t,a,s){"use strict";s.r(a);var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"animated fadeIn slow"},[s("table",{staticClass:"table container mt-5"},[t._m(0),s("tbody",t._l(t.cart.carts,function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("img",{staticClass:"img-fluid cart-img",attrs:{src:a.product.imageUrl,alt:""}})]),s("td",{staticClass:"align-middle"},[t._v("\n          "+t._s(a.product.title)+"\n          "),a.coupon?s("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.final_total))]),s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])}),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"h6 text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"h5 text-right text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e(),t.cart.final_total!==t.cart.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("應付款")]),s("td",{staticClass:"h5 text-center text-success",attrs:{colspan:"3"}},[t._v(t._s(t._f("currency")(t.cart.total-t.cart.final_total)))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入123456"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])]),s("div",{staticClass:"container"},[s("router-link",{staticClass:"btn btn-outline-danger d-block ml-auto",staticStyle:{width:"100px"},attrs:{to:"/check-out"}},[t._v("去買單")])],1)])},c=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("th"),s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",[t._v("單價")]),s("th")])}],e={data:function(){return{cart:[],coupon_code:""}},methods:{getCart:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$http.get("".concat("https://vue-course-api.hexschool.io","/api/adam/cart")).then(function(a){console.log(a),t.cart=a.data.data,t.$store.dispatch("updateLoading",!1)})},removeCartItem:function(t){var a=this;this.$store.dispatch("updateLoading",!0),this.$http.delete("".concat("https://vue-course-api.hexschool.io","/api/adam/cart/").concat(t)).then(function(t){console.log(t),a.getCart(),a.$store.dispatch("updateLoading",!1)})},addCouponCode:function(){var t=this;this.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/adam/coupon"),s={code:this.coupon_code};this.$http.post(a,{data:s}).then(function(a){console.log(a),t.$store.dispatch("updateLoading",!1),a.data.success?t.getCart():alert("優惠碼有誤")})},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/adam/order");this.$validator.validate().then(function(s){s?t.$http.post(a,{data:t.form}).then(function(a){a.data.success&&(console.log("訂單已建立",a),t.$router.push("/customer-checkout/".concat(a.data.orderId)))}):console.log("欄位不完整")})}},created:function(){this.getCart()}},n=e,i=(s("31ab"),s("2877")),r=Object(i["a"])(n,o,c,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=cart.48aa7737.js.map