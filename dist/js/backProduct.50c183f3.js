(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["backProduct"],{"014b":function(t,e,a){"use strict";var o=a("e53d"),r=a("07e3"),n=a("8e60"),i=a("63b6"),s=a("9138"),c=a("ebfd").KEY,l=a("294c"),u=a("dbdb"),d=a("45f2"),p=a("62a0"),f=a("5168"),m=a("ccb9"),v=a("6718"),b=a("47ee"),g=a("9003"),h=a("e4ae"),y=a("f772"),P=a("36c3"),_=a("1bc3"),C=a("aebd"),w=a("a159"),x=a("0395"),O=a("bf0b"),k=a("d9f6"),j=a("c3a1"),S=O.f,$=k.f,N=x.f,E=o.Symbol,M=o.JSON,F=M&&M.stringify,D="prototype",U=f("_hidden"),J=f("toPrimitive"),L={}.propertyIsEnumerable,A=u("symbol-registry"),I=u("symbols"),T=u("op-symbols"),W=Object[D],K="function"==typeof E,q=o.QObject,Q=!q||!q[D]||!q[D].findChild,Y=n&&l(function(){return 7!=w($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a})?function(t,e,a){var o=S(W,e);o&&delete W[e],$(t,e,a),o&&t!==W&&$(W,e,o)}:$,z=function(t){var e=I[t]=w(E[D]);return e._k=t,e},B=K&&"symbol"==typeof E.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof E},G=function(t,e,a){return t===W&&G(T,e,a),h(t),e=_(e,!0),h(a),r(I,e)?(a.enumerable?(r(t,U)&&t[U][e]&&(t[U][e]=!1),a=w(a,{enumerable:C(0,!1)})):(r(t,U)||$(t,U,C(1,{})),t[U][e]=!0),Y(t,e,a)):$(t,e,a)},H=function(t,e){h(t);var a,o=b(e=P(e)),r=0,n=o.length;while(n>r)G(t,a=o[r++],e[a]);return t},R=function(t,e){return void 0===e?w(t):H(w(t),e)},V=function(t){var e=L.call(this,t=_(t,!0));return!(this===W&&r(I,t)&&!r(T,t))&&(!(e||!r(this,t)||!r(I,t)||r(this,U)&&this[U][t])||e)},X=function(t,e){if(t=P(t),e=_(e,!0),t!==W||!r(I,e)||r(T,e)){var a=S(t,e);return!a||!r(I,e)||r(t,U)&&t[U][e]||(a.enumerable=!0),a}},Z=function(t){var e,a=N(P(t)),o=[],n=0;while(a.length>n)r(I,e=a[n++])||e==U||e==c||o.push(e);return o},tt=function(t){var e,a=t===W,o=N(a?T:P(t)),n=[],i=0;while(o.length>i)!r(I,e=o[i++])||a&&!r(W,e)||n.push(I[e]);return n};K||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(a){this===W&&e.call(T,a),r(this,U)&&r(this[U],t)&&(this[U][t]=!1),Y(this,t,C(1,a))};return n&&Q&&Y(W,t,{configurable:!0,set:e}),z(t)},s(E[D],"toString",function(){return this._k}),O.f=X,k.f=G,a("6abf").f=x.f=Z,a("355d").f=V,a("9aa9").f=tt,n&&!a("b8e3")&&s(W,"propertyIsEnumerable",V,!0),m.f=function(t){return z(f(t))}),i(i.G+i.W+i.F*!K,{Symbol:E});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;et.length>at;)f(et[at++]);for(var ot=j(f.store),rt=0;ot.length>rt;)v(ot[rt++]);i(i.S+i.F*!K,"Symbol",{for:function(t){return r(A,t+="")?A[t]:A[t]=E(t)},keyFor:function(t){if(!B(t))throw TypeError(t+" is not a symbol!");for(var e in A)if(A[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),i(i.S+i.F*!K,"Object",{create:R,defineProperty:G,defineProperties:H,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),M&&i(i.S+i.F*(!K||l(function(){var t=E();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){var e,a,o=[t],r=1;while(arguments.length>r)o.push(arguments[r++]);if(a=e=o[1],(y(e)||void 0!==t)&&!B(t))return g(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!B(e))return e}),o[1]=e,F.apply(M,o)}}),E[D][J]||a("35e8")(E[D],J,E[D].valueOf),d(E,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},"0395":function(t,e,a){var o=a("36c3"),r=a("6abf").f,n={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==n.call(t)?s(t):r(o(t))}},"18aa":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{"mt-5":""}},[a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal("新增")}}},[t._v("建立新產品")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.products,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",[t._v(t._s(t._f("currency")(e.price)))]),a("td",[e.is_enabled?a("span",{staticClass:"success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openModal("編輯",e)}}},[t._v("編輯")])]),a("td",[a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openModal("刪除",e)}}},[t._v("刪除")])])])}),0)]),a("pagination",{attrs:{paginations:t.pagination},on:{getProducts:t.getProducts}}),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.temProduct.title))]),t._v(" 商品(刪除後將無法恢復)。\n        ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteModal}},[t._v("確認刪除")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.imageUrl,expression:"temProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.temProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("\n                  或 上傳圖片\n                  "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:function(e){return t.uploadFile()}}})]),a("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",alt:"",src:t.temProduct.imageUrl}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.title,expression:"temProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.temProduct.title},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.category,expression:"temProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.temProduct.category},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"category",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.unit,expression:"temProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.temProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.origin_price,expression:"temProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.temProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.price,expression:"temProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.temProduct.price},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.description,expression:"temProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.temProduct.description},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.content,expression:"temProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.temProduct.content},on:{input:function(e){e.target.composing||t.$set(t.temProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.temProduct.is_enabled,expression:"temProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.temProduct.is_enabled)?t._i(t.temProduct.is_enabled,null)>-1:t._q(t.temProduct.is_enabled,1)},on:{change:function(e){var a=t.temProduct.is_enabled,o=e.target,r=o.checked?1:0;if(Array.isArray(a)){var n=null,i=t._i(a,n);o.checked?i<0&&t.$set(t.temProduct,"is_enabled",a.concat([n])):i>-1&&t.$set(t.temProduct,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.temProduct,"is_enabled",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("分類")]),a("th",[t._v("產品名稱")]),a("th",[t._v("原價")]),a("th",[t._v("售價")]),a("th",[t._v("是否啟用")]),a("th",[t._v("編輯")]),a("th",[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],n=a("cebc"),i=a("1157"),s=a.n(i),c=a("6407"),l={data:function(){return{products:[],temProduct:{},isNew:!1,status:{fileUploading:!1},pagination:{}}},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("updateLoading",!0),this.$http.get("".concat("https://vue-course-api.hexschool.io","/api/adam/admin/products?page=").concat(e)).then(function(e){console.log(e),t.$store.dispatch("updateLoading",!1),t.products=e.data.products,t.pagination=e.data.pagination})},openModal:function(t,e){"新增"===t?(this.temProduct={},this.isNew="新增",s()("#productModal").modal("show")):"編輯"===t?(this.temProduct=Object(n["a"])({},e),this.isNew="編輯",s()("#productModal").modal("show")):(this.temProduct=Object(n["a"])({},e),this.isNew="刪除",s()("#deleteModal").modal("show"))},deleteModal:function(){var t=this;this.$http.delete("".concat("https://vue-course-api.hexschool.io","/api/adam/admin/product/").concat(t.temProduct.id)).then(function(e){console.log(e),s()("#deleteModal").modal("hide"),t.getProducts()})},uploadFile:function(){var t=this;console.log(this);var e=this.$refs.files.files[0],a=new FormData;a.append("file-to-upload",e);var o="".concat("https://vue-course-api.hexschool.io","/api/adam/admin/upload");this.status.fileUploading=!0,this.$http.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),e.data.success?(t.$set(t.temProduct,"imageUrl",e.data.imageUrl),console.log(t.temProduct)):t.$bus.$emit("push",e.data.message,"danger"),t.status.fileUploading=!1})},updateProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/adam/admin/product"),a="post";"編輯"===t.isNew&&(e="".concat("https://vue-course-api.hexschool.io","/api/adam/admin/product/").concat(t.temProduct.id),a="put"),this.$http[a](e,{data:t.temProduct}).then(function(e){console.log(e.data),e.data.success?(s()("#productModal").modal("hide"),t.getProducts()):(s()("#productModal").modal("hide"),t.getProducts(),console.log("新增失敗"))})}},created:function(){this.getProducts()},components:{pagination:c["a"]}},u=l,d=a("2877"),p=Object(d["a"])(u,o,r,!1,null,null,null);e["default"]=p.exports},"268f":function(t,e,a){t.exports=a("fde4")},"32a6":function(t,e,a){var o=a("241e"),r=a("c3a1");a("ce7e")("keys",function(){return function(t){return r(o(t))}})},"355d":function(t,e){e.f={}.propertyIsEnumerable},"454f":function(t,e,a){a("46a7");var o=a("584a").Object;t.exports=function(t,e,a){return o.defineProperty(t,e,a)}},"46a7":function(t,e,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"47ee":function(t,e,a){var o=a("c3a1"),r=a("9aa9"),n=a("355d");t.exports=function(t){var e=o(t),a=r.f;if(a){var i,s=a(t),c=n.f,l=0;while(s.length>l)c.call(t,i=s[l++])&&e.push(i)}return e}},6407:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!t.paginations.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.whichPage(t.paginations.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.paginations.total_pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.paginations.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.whichPage(e)}}},[t._v(t._s(e))])])}),a("li",{staticClass:"page-item",class:{disabled:!t.paginations.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.whichPage(t.paginations.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},r=[],n={props:["paginations"],methods:{whichPage:function(t){this.$emit("getProducts",t)}}},i=n,s=a("2877"),c=Object(s["a"])(i,o,r,!1,null,null,null);e["a"]=c.exports},6718:function(t,e,a){var o=a("e53d"),r=a("584a"),n=a("b8e3"),i=a("ccb9"),s=a("d9f6").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=n?{}:o.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},"6abf":function(t,e,a){var o=a("e6f3"),r=a("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},"85f2":function(t,e,a){t.exports=a("454f")},"8aae":function(t,e,a){a("32a6"),t.exports=a("584a").Object.keys},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},a4bb:function(t,e,a){t.exports=a("8aae")},bd86:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var o=a("85f2"),r=a.n(o);function n(t,e,a){return e in t?r()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},bf0b:function(t,e,a){var o=a("355d"),r=a("aebd"),n=a("36c3"),i=a("1bc3"),s=a("07e3"),c=a("794b"),l=Object.getOwnPropertyDescriptor;e.f=a("8e60")?l:function(t,e){if(t=n(t),e=i(e,!0),c)try{return l(t,e)}catch(a){}if(s(t,e))return r(!o.f.call(t,e),t[e])}},bf90:function(t,e,a){var o=a("36c3"),r=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(t,e){return r(o(t),e)}})},ccb9:function(t,e,a){e.f=a("5168")},ce7e:function(t,e,a){var o=a("63b6"),r=a("584a"),n=a("294c");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],i={};i[t]=e(a),o(o.S+o.F*n(function(){a(1)}),"Object",i)}},cebc:function(t,e,a){"use strict";a.d(e,"a",function(){return u});var o=a("268f"),r=a.n(o),n=a("e265"),i=a.n(n),s=a("a4bb"),c=a.n(s),l=a("bd86");function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},o=c()(a);"function"===typeof i.a&&(o=o.concat(i()(a).filter(function(t){return r()(a,t).enumerable}))),o.forEach(function(e){Object(l["a"])(t,e,a[e])})}return t}},e265:function(t,e,a){t.exports=a("ed33")},ebfd:function(t,e,a){var o=a("62a0")("meta"),r=a("f772"),n=a("07e3"),i=a("d9f6").f,s=0,c=Object.isExtensible||function(){return!0},l=!a("294c")(function(){return c(Object.preventExtensions({}))}),u=function(t){i(t,o,{value:{i:"O"+ ++s,w:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,o)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[o].i},p=function(t,e){if(!n(t,o)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[o].w},f=function(t){return l&&m.NEED&&c(t)&&!n(t,o)&&u(t),t},m=t.exports={KEY:o,NEED:!1,fastKey:d,getWeak:p,onFreeze:f}},ed33:function(t,e,a){a("014b"),t.exports=a("584a").Object.getOwnPropertySymbols},fde4:function(t,e,a){a("bf90");var o=a("584a").Object;t.exports=function(t,e){return o.getOwnPropertyDescriptor(t,e)}}}]);
//# sourceMappingURL=backProduct.50c183f3.js.map